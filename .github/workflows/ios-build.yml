release_mobile:
    runs-on: macos-latest
    if: startsWith(github.event.head_commit.message, 'Release:')
    steps:
        - name: Checkout Repository
          uses: actions/checkout@v4
        
        - name: Select Xcode Version
          run: sudo xcode-select -s /Applications/Xcode_12.4.app

        - name: Install Dependencies
          run: |
            brew install cocoapods
            cd ios && pod install --repo-update && cd ..

        - name: Build iOS App
          run: |
            xcodebuild -workspace ios/YourApp.xcworkspace \
              -scheme YourApp \
              -sdk iphoneos \
              -configuration Release \
              -archivePath build/YourApp.xcarchive archive

        - name: Export IPA
          run: |
            xcodebuild -exportArchive \
              -archivePath build/YourApp.xcarchive \
              -exportOptionsPlist ios/exportOptions.plist \
              -exportPath build/YourApp.ipa

        - name: Upload iOS Build
          uses: actions/upload-artifact@v4
          with:
            name: animetv-ios.ipa
            path: build/YourApp.ipa
